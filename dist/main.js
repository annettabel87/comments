(()=>{"use strict";var e={543:(e,t,r)=>{r.r(t)},431:(e,t,r)=>{r.r(t)},945:(e,t,r)=>{r.r(t)},371:(e,t,r)=>{r.r(t)},787:(e,t,r)=>{r.r(t)},331:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalStore=void 0,t.globalStore=new class{constructor(){this.store=[{id:1,name:"Anna",comment:"hello, my friends.",date:"01.01.2022 16:58",isLiked:!0},{id:2,name:"Алексей",comment:"Привет, пойдём поиграем в geometry dash.",date:"10.03.2023 16:58",isLiked:!0}]}addComment(e){this.store.push(e)}getStore(){return this.store}deleteComment(e){this.store=[...this.store].filter((t=>t.id!==+e))}toggleLike(e){this.store=[...this.store].map((t=>t.id===+e?Object.assign(Object.assign({},t),{isLiked:!t.isLiked}):t))}}},820:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createComment=void 0;const n=r(457),o=r(204);r(543),t.createComment=(e,t)=>{const r=(0,o.createElement)(t,"div","comment");r.id=e.id.toString(),(0,o.createElement)(r,"p","comment__bold",e.name),(0,o.createElement)(r,"p","comment__text",e.comment),(0,o.createElement)(r,"p","comment__light",n.dateHelper.formateDate(e.date));const a=(0,o.createElement)(r,"button","like-btn");a.dataset.id="like",e.isLiked?a.classList.add("isLiked"):a.classList.remove("isLiked"),(0,o.createElement)(r,"button","delete-btn","x").dataset.id="delete"}},419:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addComments=t.commentsBlock=void 0;const n=r(331),o=r(204),a=r(820);function i(){t.commentsBlock.innerHTML="",n.globalStore.getStore().forEach((e=>(0,a.createComment)(e,t.commentsBlock)))}r(431),t.commentsBlock=(0,o.createElement)(null,"div","comments-block"),t.commentsBlock.addEventListener("click",(e=>{const t=e.target;if(t&&t instanceof HTMLElement){const e=t.closest(".comment");if(e instanceof HTMLElement)switch(t.dataset.id){case"delete":n.globalStore.deleteComment(e.id),i();break;case"like":n.globalStore.toggleLike(e.id),i()}}})),t.addComments=i,i()},368:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.form=void 0;const n=r(204),o=r(457),a=r(528),i=r(419);r(945),t.form=(0,n.createElement)(null,"form","form"),(0,n.createElement)(t.form,"h3","form__title","Ваш комментарий");const d=(0,n.createElement)(t.form,"label","form__label");d.textContent="Имя: ";const l=a.formHelper.createErrorBlock(d,"длина от 4 до 30 символов",!0),m=(0,n.createElement)(t.form,"input","form__input");m.setAttribute("placeholder","введите имя"),m.setAttribute("name","name"),m.addEventListener("input",(()=>{v(m,4,30,l)})),m.addEventListener("blur",(()=>{v(m,2,300,l)}));const s=(0,n.createElement)(t.form,"label","form__label");s.textContent="Комментарий";const c=a.formHelper.createErrorBlock(s,"длина от 1 до 300 символов",!0),u=(0,n.createElement)(t.form,"textarea","form__textarea");u.setAttribute("name","comment"),u.addEventListener("input",(()=>{v(u,2,300,c)})),u.addEventListener("blur",(()=>{v(u,2,300,c)})),(0,n.createElement)(t.form,"label","form__label").textContent="Дата:";const f=(0,n.createElement)(t.form,"input","form__date");f.setAttribute("type","date"),f.setAttribute("value",""),f.setAttribute("name","date"),f.setAttribute("max",o.dateHelper.getDateToString());const b=(0,n.createElement)(t.form,"button","form__btn");function v(e,t,r,n){const o=a.formHelper.validate(e.value,t,r);n.hidden=o,o?e.classList.remove("invalid"):e.classList.add("invalid"),b.disabled=!n.hidden}function p(e){e.preventDefault(),a.formHelper.addData(m.value,u.value,f.value),t.form.reset(),(0,i.addComments)()}b.setAttribute("type","submit"),b.textContent="Отправить",b.disabled=!0,u.addEventListener("keydown",(e=>{"Enter"===e.key&&p(e)})),t.form.addEventListener("submit",(e=>{p(e)}))},695:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sidebar=void 0;const n=r(204);r(371),t.sidebar=(0,n.createElement)(null,"div","sidebar"),["друзья","сообщения","музыка","новости"].forEach((e=>{(0,n.createElement)(t.sidebar,"p","sidebar__item",e)}))},204:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=void 0,t.createElement=(e,t="div",r="",n="")=>{const o=document.createElement(t);return o.classList.add(r),o.textContent=n,e&&e.append(o),o}},457:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dateHelper=void 0,t.dateHelper=class{static getDateToString(){const e=new Date;return`${e.getFullYear()}-${this.correctDate(e.getMonth()+1)}-${this.correctDate(e.getDate())}`}static correctDate(e){return e<10?`0${e}`:e}static formateDate(e){const t=new Date(e),r=864e5,n=Date.now();let o;return o=n-t.valueOf()<r?`сегодня, ${t.toLocaleTimeString(["ru-RU"],{hour:"2-digit",minute:"2-digit"})}`:n-t.valueOf()>r&&n-t.valueOf()<1728e5?`вчера, ${t.toLocaleTimeString(["ru-RU"],{hour:"2-digit",minute:"2-digit"})}`:t.toLocaleTimeString(["ru-RU"],{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),o}}},528:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formHelper=void 0;const n=r(331),o=r(204);t.formHelper=class{static addData(e,t,r){const o={id:Date.now(),isLiked:!1,name:e,comment:t,date:r||Date.now().valueOf()};n.globalStore.addComment(o)}static validate(e,t,r){return e.length>=t&&e.length<=r}static createErrorBlock(e,t,r){const n=(0,o.createElement)(e,"div","error","");return n.innerText=t,n.hidden=r,n}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=r(204),t=r(368),n=r(419),o=r(695);r(787),window.addEventListener("DOMContentLoaded",(()=>{const r=document.body,a=(0,e.createElement)(r,"div","app"),i=(0,e.createElement)(a,"main","main");i.append(n.commentsBlock,t.form),a.append(o.sidebar,i)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU8sR0FBTyxFLE1DTDlELGVBQ0EsU0FDQSxTQUNBLFNBQ0EsT0FFQXNELE9BQU9qRixpQkFBaUIsb0JBQW9CLEtBQzFDLE1BQU1rRixFQUFjekMsU0FBUzBDLEtBQ3ZCQyxHQUFNLElBQUFoRyxlQUFjOEYsRUFBYSxNQUFPLE9BQ3hDRyxHQUFZLElBQUFqRyxlQUFjZ0csRUFBSyxPQUFRLFFBQzdDQyxFQUFVM0MsT0FBTyxFQUFBNUMsY0FBZSxFQUFBUSxNQUNoQzhFLEVBQUkxQyxPQUFRLEVBQUFQLFFBQVNrRCxFQUFVLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb21tZW50cy8uL3NyYy9TdG9yZS50cyIsIndlYnBhY2s6Ly9jb21tZW50cy8uL3NyYy9jb21wb25lbnRzL2NvbW1lbnRzL2NvbW1lbnQvY29tbWVudC50cyIsIndlYnBhY2s6Ly9jb21tZW50cy8uL3NyYy9jb21wb25lbnRzL2NvbW1lbnRzL2NvbW1lbnRzQmxvY2sudHMiLCJ3ZWJwYWNrOi8vY29tbWVudHMvLi9zcmMvY29tcG9uZW50cy9mb3JtL2Zvcm0udHMiLCJ3ZWJwYWNrOi8vY29tbWVudHMvLi9zcmMvY29tcG9uZW50cy9zaWRlYmFyL3NpZGViYXIudHMiLCJ3ZWJwYWNrOi8vY29tbWVudHMvLi9zcmMvaGVscGVycy9jb250cm9sLnRzIiwid2VicGFjazovL2NvbW1lbnRzLy4vc3JjL2hlbHBlcnMvZGF0ZUhlbHBlci50cyIsIndlYnBhY2s6Ly9jb21tZW50cy8uL3NyYy9oZWxwZXJzL2Zvcm1IZWxwZXIudHMiLCJ3ZWJwYWNrOi8vY29tbWVudHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vY29tbWVudHMvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9jb21tZW50cy8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTdG9yZSB7XHJcbiAgICBwcml2YXRlIHN0b3JlOiBJRm9ybURhdGFbXSA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkOiAxLFxyXG4gICAgICAgICAgICBuYW1lOiAnQW5uYScsXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6ICdoZWxsbywgbXkgZnJpZW5kcy4nLFxyXG4gICAgICAgICAgICBkYXRlOiAnMDEuMDEuMjAyMiAxNjo1OCcsXHJcbiAgICAgICAgICAgIGlzTGlrZWQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6IDIsXHJcbiAgICAgICAgICAgIG5hbWU6ICfQkNC70LXQutGB0LXQuScsXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6ICfQn9GA0LjQstC10YIsINC/0L7QudC00ZHQvCDQv9C+0LjQs9GA0LDQtdC8INCyIGdlb21ldHJ5IGRhc2guJyxcclxuICAgICAgICAgICAgZGF0ZTogJzEwLjAzLjIwMjMgMTY6NTgnLFxyXG4gICAgICAgICAgICBpc0xpa2VkOiB0cnVlXHJcbiAgICAgICAgfSwgICBcclxuICAgIF07XHJcblxyXG4gICAgYWRkQ29tbWVudChjb21tZW50OiBJRm9ybURhdGEpIHtcclxuICAgICAgICB0aGlzLnN0b3JlLnB1c2goY29tbWVudCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGdldFN0b3JlKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmU7XHJcbiAgICB9O1xyXG5cclxuICAgIGRlbGV0ZUNvbW1lbnQoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc3RvcmUgPSAgWy4uLnRoaXMuc3RvcmVdLmZpbHRlcihpdGVtID0+IGl0ZW0uaWQgIT09ICAraWQpXHJcbiAgICB9O1xyXG5cclxuICAgIHRvZ2dsZUxpa2UoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc3RvcmUgPSAgWy4uLnRoaXMuc3RvcmVdLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gK2lkID8gey4uLml0ZW0sIGlzTGlrZWQ6ICAhaXRlbS5pc0xpa2VkfSA6IGl0ZW1cclxuICAgICAgICB9KTsgICAgICAgIFxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJRm9ybURhdGEge1xyXG4gICAgaWQ6IG51bWJlcjtcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIGNvbW1lbnQ6IHN0cmluZyxcclxuICAgIGRhdGU6IHN0cmluZyB8IG51bWJlcixcclxuICAgIGlzTGlrZWQ6IGJvb2xlYW5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdsb2JhbFN0b3JlID0gbmV3IFN0b3JlKCk7IiwiaW1wb3J0IHsgSUZvcm1EYXRhIH0gZnJvbSAnLi4vLi4vLi4vU3RvcmUnO1xyXG5pbXBvcnQgeyBkYXRlSGVscGVyIH0gZnJvbSAnLi4vLi4vLi4vaGVscGVycy9kYXRlSGVscGVyJztcclxuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uLy4uLy4uL2hlbHBlcnMvY29udHJvbCc7XHJcbmltcG9ydCAnLi9jb21tZW50LnNjc3MnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbW1lbnQgPSAoY29tbWVudERhdGE6IElGb3JtRGF0YSwgcGFyZW50OiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgXHJcbiAgICBjb25zdCBjb21tZW50ID0gY3JlYXRlRWxlbWVudChwYXJlbnQsICdkaXYnLCAnY29tbWVudCcpO1xyXG4gICAgY29tbWVudC5pZCA9IGNvbW1lbnREYXRhLmlkLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgY29uc3QgbmFtZSA9IGNyZWF0ZUVsZW1lbnQoY29tbWVudCwgJ3AnLCAnY29tbWVudF9fYm9sZCcsIGNvbW1lbnREYXRhLm5hbWUpO1xyXG4gICAgY29uc3QgdGV4dCA9IGNyZWF0ZUVsZW1lbnQoY29tbWVudCwgJ3AnLCAnY29tbWVudF9fdGV4dCcsIGNvbW1lbnREYXRhLmNvbW1lbnQpO1xyXG5cclxuICAgIGNvbnN0IGRhdGUgPSBjcmVhdGVFbGVtZW50KGNvbW1lbnQsICdwJywgJ2NvbW1lbnRfX2xpZ2h0JywgZGF0ZUhlbHBlci5mb3JtYXRlRGF0ZShjb21tZW50RGF0YS5kYXRlKSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGxpa2VCdG4gPSBjcmVhdGVFbGVtZW50KGNvbW1lbnQsICdidXR0b24nLCAnbGlrZS1idG4nKTtcclxuICAgIGxpa2VCdG4uZGF0YXNldC5pZCA9ICdsaWtlJztcclxuICAgIFxyXG4gICAgY29tbWVudERhdGEuaXNMaWtlZCA/IGxpa2VCdG4uY2xhc3NMaXN0LmFkZCgnaXNMaWtlZCcpIDogIGxpa2VCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaXNMaWtlZCcpO1xyXG4gICAgY29uc3QgZGVsZXRlQnRuID0gY3JlYXRlRWxlbWVudChjb21tZW50LCAnYnV0dG9uJywgJ2RlbGV0ZS1idG4nLCAneCcpO1xyXG4gICAgZGVsZXRlQnRuLmRhdGFzZXQuaWQgPSAnZGVsZXRlJzsgICBcclxuICAgIFxyXG59XHJcbiIsImltcG9ydCB7IGdsb2JhbFN0b3JlIH0gZnJvbSAnLi4vLi4vU3RvcmUnO1xyXG5pbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSAnLi4vLi4vaGVscGVycy9jb250cm9sJztcclxuaW1wb3J0IHsgY3JlYXRlQ29tbWVudCB9IGZyb20gJy4vY29tbWVudC9jb21tZW50JztcclxuaW1wb3J0ICcuL2NvbW1lbnRzQmxvY2suc2Nzcyc7XHJcblxyXG5leHBvcnQgY29uc3QgY29tbWVudHNCbG9jayA9IGNyZWF0ZUVsZW1lbnQobnVsbCwgJ2RpdicsJ2NvbW1lbnRzLWJsb2NrJyk7XHJcblxyXG5jb21tZW50c0Jsb2NrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgIFxyXG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcbiAgICBcclxuXHJcbiAgICBpZih0YXJnZXQgJiYgdGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpICB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudENvbW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmNvbW1lbnQnKTtcclxuICAgICAgICBpZihjdXJyZW50Q29tbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHRhcmdldC5kYXRhc2V0LmlkKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxyXG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbFN0b3JlLmRlbGV0ZUNvbW1lbnQoY3VycmVudENvbW1lbnQuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENvbW1lbnRzKClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlICdsaWtlJzpcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxTdG9yZS50b2dnbGVMaWtlKGN1cnJlbnRDb21tZW50LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRDb21tZW50cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgICAgICBcclxuICAgIH0gICAgICAgXHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbW1lbnRzKCkge1xyXG4gICAgY29tbWVudHNCbG9jay5pbm5lckhUTUwgPScnO1xyXG4gICAgZ2xvYmFsU3RvcmUuZ2V0U3RvcmUoKS5mb3JFYWNoKGNvbW1lbnQgPT4gY3JlYXRlQ29tbWVudChjb21tZW50LCBjb21tZW50c0Jsb2NrKSk7XHJcbn1cclxuYWRkQ29tbWVudHMoKTsiLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSAnLi4vLi4vaGVscGVycy9jb250cm9sJztcbmltcG9ydCB7IGRhdGVIZWxwZXIgfSBmcm9tICcuLi8uLi9oZWxwZXJzL2RhdGVIZWxwZXInO1xuaW1wb3J0IHsgZm9ybUhlbHBlciB9IGZyb20gJy4uLy4uL2hlbHBlcnMvZm9ybUhlbHBlcic7XG5pbXBvcnQgeyBhZGRDb21tZW50cyB9IGZyb20gJy4uL2NvbW1lbnRzL2NvbW1lbnRzQmxvY2snO1xuaW1wb3J0ICcuL2Zvcm0uc2Nzcyc7XG5cbmV4cG9ydCBjb25zdCBmb3JtID0gY3JlYXRlRWxlbWVudChudWxsLCAnZm9ybScsICdmb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50O1xuY29uc3QgdGl0bGUgPSBjcmVhdGVFbGVtZW50KGZvcm0sICdoMycsJ2Zvcm1fX3RpdGxlJywgJ9CS0LDRiCDQutC+0LzQvNC10L3RgtCw0YDQuNC5Jyk7XG5cblxuY29uc3QgbmFtZUxhYmVsID0gY3JlYXRlRWxlbWVudChmb3JtLCAnbGFiZWwnLCAnZm9ybV9fbGFiZWwnKTtcbm5hbWVMYWJlbC50ZXh0Q29udGVudCA9ICfQmNC80Y86ICc7XG5jb25zdCBlcnJvckJsb2NrTmFtZSA9IGZvcm1IZWxwZXIuY3JlYXRlRXJyb3JCbG9jayhuYW1lTGFiZWwsJ9C00LvQuNC90LAg0L7RgiA0INC00L4gMzAg0YHQuNC80LLQvtC70L7QsicsIHRydWUpO1xuXG5jb25zdCBuYW1lSW5wdXQgPSBjcmVhdGVFbGVtZW50KGZvcm0sICdpbnB1dCcsICdmb3JtX19pbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5uYW1lSW5wdXQuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICfQstCy0LXQtNC40YLQtSDQuNC80Y8nKTtcbm5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnbmFtZScpO1xuXG5cbm5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICBjaGFuZ2VIZWxwZXIobmFtZUlucHV0LCA0LCAzMCwgZXJyb3JCbG9ja05hbWUpOyAgICBcbn0pO1xubmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG4gICAgY2hhbmdlSGVscGVyKG5hbWVJbnB1dCwgMiwgMzAwLCBlcnJvckJsb2NrTmFtZSk7ICAgICBcbn0pO1xuXG5jb25zdCB0ZXh0TGFiZWwgPSBjcmVhdGVFbGVtZW50KGZvcm0sICdsYWJlbCcsICdmb3JtX19sYWJlbCcpO1xudGV4dExhYmVsLnRleHRDb250ZW50ID0gJ9Ca0L7QvNC80LXQvdGC0LDRgNC40LknO1xuY29uc3QgZXJyb3JCbG9ja1RleHQgPSBmb3JtSGVscGVyLmNyZWF0ZUVycm9yQmxvY2sodGV4dExhYmVsLCfQtNC70LjQvdCwINC+0YIgMSDQtNC+IDMwMCDRgdC40LzQstC+0LvQvtCyJywgdHJ1ZSk7XG5cblxuY29uc3QgdGV4dElucHV0ID0gY3JlYXRlRWxlbWVudChmb3JtLCAndGV4dGFyZWEnLCAnZm9ybV9fdGV4dGFyZWEnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xudGV4dElucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdjb21tZW50Jyk7XG5cbnRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICBjaGFuZ2VIZWxwZXIodGV4dElucHV0LCAyLCAzMDAsIGVycm9yQmxvY2tUZXh0KTsgICAgIFxufSk7XG50ZXh0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHtcbiAgICBjaGFuZ2VIZWxwZXIodGV4dElucHV0LCAyLCAzMDAsIGVycm9yQmxvY2tUZXh0KTsgICAgIFxufSk7XG5cbmNvbnN0IGRhdGVMYWJlbCA9IGNyZWF0ZUVsZW1lbnQoZm9ybSwgJ2xhYmVsJywgJ2Zvcm1fX2xhYmVsJyk7XG5kYXRlTGFiZWwudGV4dENvbnRlbnQgPSAn0JTQsNGC0LA6JztcblxuY29uc3QgZGF0ZUlucHV0ID0gY3JlYXRlRWxlbWVudChmb3JtLCAnaW5wdXQnLCAnZm9ybV9fZGF0ZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5kYXRlSW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2RhdGUnKTtcbmRhdGVJbnB1dC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywnJyk7XG5kYXRlSW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ2RhdGUnKTtcbmRhdGVJbnB1dC5zZXRBdHRyaWJ1dGUoJ21heCcsIGRhdGVIZWxwZXIuZ2V0RGF0ZVRvU3RyaW5nKCkpO1xuXG5jb25zdCBzdWJtaXRCdG4gPSBjcmVhdGVFbGVtZW50KGZvcm0sICdidXR0b24nLCAnZm9ybV9fYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5zdWJtaXRCdG4uc2V0QXR0cmlidXRlKCd0eXBlJywgJ3N1Ym1pdCcpO1xuc3VibWl0QnRuLnRleHRDb250ZW50ID0gJ9Ce0YLQv9GA0LDQstC40YLRjCc7XG5zdWJtaXRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuXG50ZXh0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgaWYoZS5rZXkgPT09ICdFbnRlcicpe1xuICAgICAgICBzdWJtaXRGb3JtKGUpOyBcbiAgICB9XG59KVxuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgICBzdWJtaXRGb3JtKGUpOyAgICBcbn0pOyBcblxuXG5mdW5jdGlvbiBjaGFuZ2VIZWxwZXIoZWxlbTogSFRNTElucHV0RWxlbWVudCB8IEhUTUxUZXh0QXJlYUVsZW1lbnQsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgZXJyb3JCbG9jazogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBpc1ZhbGlkID0gZm9ybUhlbHBlci52YWxpZGF0ZShlbGVtLnZhbHVlLCBtaW4sIG1heCk7XG4gICAgZXJyb3JCbG9jay5oaWRkZW4gPSAgaXNWYWxpZDtcbiAgICBcbiAgICAhaXNWYWxpZCA/IGVsZW0uY2xhc3NMaXN0LmFkZCgnaW52YWxpZCcpIDogZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdpbnZhbGlkJyk7XG4gICAgc3VibWl0QnRuLmRpc2FibGVkID0gIWVycm9yQmxvY2suaGlkZGVuO1xufTtcblxuZnVuY3Rpb24gc3VibWl0Rm9ybShlOiBTdWJtaXRFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZm9ybUhlbHBlci5hZGREYXRhKG5hbWVJbnB1dC52YWx1ZSwgdGV4dElucHV0LnZhbHVlLCBkYXRlSW5wdXQudmFsdWUgKTsgICAgXG4gICAgZm9ybS5yZXNldCgpO1xuICAgIGFkZENvbW1lbnRzKCk7XG59IiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL2NvbnRyb2xcIjtcclxuaW1wb3J0ICcuL3NpZGViYXIuc2Nzcyc7XHJcblxyXG5jb25zdCBsaW5rcyA9IFsn0LTRgNGD0LfRjNGPJywgJ9GB0L7QvtCx0YnQtdC90LjRjycsICfQvNGD0LfRi9C60LAnLCAn0L3QvtCy0L7RgdGC0LgnXTtcclxuXHJcbmV4cG9ydCBjb25zdCBzaWRlYmFyID0gY3JlYXRlRWxlbWVudChudWxsLCAnZGl2JywgJ3NpZGViYXInKTtcclxuXHJcbmxpbmtzLmZvckVhY2gobGluayA9PiB7XHJcbiAgICBjb25zdCBpdGVtID0gY3JlYXRlRWxlbWVudChzaWRlYmFyLCAncCcsICdzaWRlYmFyX19pdGVtJywgbGluaylcclxufSk7IiwiZXhwb3J0IGNvbnN0IGNyZWF0ZUVsZW1lbnQgPSAocGFyZW50Tm9kZTogSFRNTEVsZW1lbnQgfCBudWxsLCB0YWdOYW1lID0gJ2RpdicsIGNsYXNzTGlzdCA9ICcnLCBjb250ZW50ID0gJycpID0+IHtcclxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcclxuICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NMaXN0KTtcclxuICBlbGVtZW50LnRleHRDb250ZW50ID0gY29udGVudDtcclxuICBpZiAocGFyZW50Tm9kZSkge1xyXG4gICAgcGFyZW50Tm9kZS5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZWxlbWVudDtcclxufTtcclxuXHJcbi8vINGE0YPQvdC60YbQuNGPINC00LvRjyDQsNCy0YLQvtC80LDRgtC40LfQsNGG0LjQuCDRgdC+0LfQtNCw0L3QuNGPINC+0LHRitC10LrRgtC+0LIiLCJleHBvcnQgY2xhc3MgZGF0ZUhlbHBlciB7XHJcblxyXG4gICAgc3RhdGljIGdldERhdGVUb1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICByZXR1cm4gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfS0ke3RoaXMuY29ycmVjdERhdGUoZGF0ZS5nZXRNb250aCgpICsgMSl9LSR7dGhpcy5jb3JyZWN0RGF0ZShkYXRlLmdldERhdGUoKSl9YDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjb3JyZWN0RGF0ZShkYXRlOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gZGF0ZSA8ICAxMCA/IGAwJHtkYXRlfWAgOiBkYXRlXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHN0YXRpYyBmb3JtYXRlRGF0ZShkYXRlOiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKGRhdGUpOyAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgb25lRGF5ID0gODY0MDAwMDA7XHJcbiAgICAgICAgY29uc3QgdHdvRGF5cyA9IDE3MjgwMDAwMDtcclxuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIGxldCBzaG93RGF0YTtcclxuICAgICAgICBcclxuICAgICAgICBpZigobm93IC0gIGN1cnJlbnREYXRlLnZhbHVlT2YoKSkgPCBvbmVEYXkpIHtcclxuICAgICAgICAgICAgc2hvd0RhdGEgPSBg0YHQtdCz0L7QtNC90Y8sICR7Y3VycmVudERhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKFsncnUtUlUnXSwge2hvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCd9KX1gO1xyXG4gICAgICAgIH0gZWxzZSBpZigobm93IC0gY3VycmVudERhdGUudmFsdWVPZigpKSA+IG9uZURheSAmJiAobm93IC0gY3VycmVudERhdGUudmFsdWVPZigpKSA8IHR3b0RheXMpIHtcclxuICAgICAgICAgICAgc2hvd0RhdGEgPSBg0LLRh9C10YDQsCwgJHtjdXJyZW50RGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoWydydS1SVSddLCB7aG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0J30pfWBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzaG93RGF0YSA9IGN1cnJlbnREYXRlLnRvTG9jYWxlVGltZVN0cmluZyhbJ3J1LVJVJ10sIHtkYXk6ICdudW1lcmljJywgbW9udGg6ICdudW1lcmljJywgeWVhcjogJ251bWVyaWMnLCBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHNob3dEYXRhO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSUZvcm1EYXRhLCBnbG9iYWxTdG9yZSB9IGZyb20gXCIuLi9TdG9yZVwiO1xyXG5pbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSBcIi4vY29udHJvbFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIGZvcm1IZWxwZXIgeyAgICBcclxuXHJcbiAgICBzdGF0aWMgYWRkRGF0YShuYW1lVmFsdWU6IHN0cmluZywgdGV4dFZhbHVlOiBzdHJpbmcsIGRhdGVWYWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YTogSUZvcm1EYXRhID0ge1xyXG4gICAgICAgICAgICBpZDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgaXNMaWtlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWVWYWx1ZSxcclxuICAgICAgICAgICAgY29tbWVudDogdGV4dFZhbHVlLFxyXG4gICAgICAgICAgICBkYXRlOiBkYXRlVmFsdWUgPyBkYXRlVmFsdWUgOiBEYXRlLm5vdygpLnZhbHVlT2YoKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgZ2xvYmFsU3RvcmUuYWRkQ29tbWVudChkYXRhKTsgICAgICAgICAgICAgICAgXHJcbiAgICB9ICBcclxuXHJcbiAgICBzdGF0aWMgdmFsaWRhdGUodmFsdWU6IHN0cmluZywgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA+PSBtaW4gICAmJiB2YWx1ZS5sZW5ndGggPD0gbWF4ID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVFcnJvckJsb2NrKHBhcmVudDogSFRNTEVsZW1lbnQsIHRleHQ6IHN0cmluZywgaXNTaG93OiBib29sZWFuKSB7ICAgICAgICBcclxuICAgICAgICBjb25zdCBlcnJvckJsb2NrID0gY3JlYXRlRWxlbWVudChwYXJlbnQsICdkaXYnLCAnZXJyb3InLCAnJyk7XHJcbiAgICAgICAgZXJyb3JCbG9jay5pbm5lclRleHQgPSAgdGV4dDtcclxuICAgICAgICBlcnJvckJsb2NrLmhpZGRlbiAgPSBpc1Nob3c7ICAgXHJcbiAgICAgICAgcmV0dXJuIGVycm9yQmxvY2s7ICAgICBcclxuICAgIH1cclxufVxyXG5cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuL2hlbHBlcnMvY29udHJvbCc7XHJcbmltcG9ydCB7IGZvcm0gfSBmcm9tICcuL2NvbXBvbmVudHMvZm9ybS9mb3JtJztcclxuaW1wb3J0IHsgY29tbWVudHNCbG9jayB9IGZyb20gJy4vY29tcG9uZW50cy9jb21tZW50cy9jb21tZW50c0Jsb2NrJztcclxuaW1wb3J0IHsgc2lkZWJhciB9IGZyb20gJy4vY29tcG9uZW50cy9zaWRlYmFyL3NpZGViYXInO1xyXG5pbXBvcnQgJy4vZ2xvYmFsLnNjc3MnO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcbiAgY29uc3Qgcm9vdEVsZW1lbnQgPSBkb2N1bWVudC5ib2R5O1xyXG4gIGNvbnN0IGFwcCA9IGNyZWF0ZUVsZW1lbnQocm9vdEVsZW1lbnQsICdkaXYnLCAnYXBwJyk7XHJcbiAgY29uc3QgbWFpbkJsb2NrID0gY3JlYXRlRWxlbWVudChhcHAsICdtYWluJywgJ21haW4nKTtcclxuICBtYWluQmxvY2suYXBwZW5kKGNvbW1lbnRzQmxvY2ssIGZvcm0pXHJcbiAgYXBwLmFwcGVuZCggc2lkZWJhciwgbWFpbkJsb2NrKTtcclxufSk7XHJcbiJdLCJuYW1lcyI6WyJnbG9iYWxTdG9yZSIsInN0b3JlIiwiaWQiLCJuYW1lIiwiY29tbWVudCIsImRhdGUiLCJpc0xpa2VkIiwiYWRkQ29tbWVudCIsInRoaXMiLCJwdXNoIiwiZ2V0U3RvcmUiLCJkZWxldGVDb21tZW50IiwiZmlsdGVyIiwiaXRlbSIsInRvZ2dsZUxpa2UiLCJtYXAiLCJjcmVhdGVDb21tZW50IiwiY29tbWVudERhdGEiLCJwYXJlbnQiLCJjcmVhdGVFbGVtZW50IiwidG9TdHJpbmciLCJkYXRlSGVscGVyIiwiZm9ybWF0ZURhdGUiLCJsaWtlQnRuIiwiZGF0YXNldCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImFkZENvbW1lbnRzIiwiY29tbWVudHNCbG9jayIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsIkhUTUxFbGVtZW50IiwiY3VycmVudENvbW1lbnQiLCJjbG9zZXN0IiwiZm9ybSIsIm5hbWVMYWJlbCIsInRleHRDb250ZW50IiwiZXJyb3JCbG9ja05hbWUiLCJmb3JtSGVscGVyIiwiY3JlYXRlRXJyb3JCbG9jayIsIm5hbWVJbnB1dCIsInNldEF0dHJpYnV0ZSIsImNoYW5nZUhlbHBlciIsInRleHRMYWJlbCIsImVycm9yQmxvY2tUZXh0IiwidGV4dElucHV0IiwiZGF0ZUlucHV0IiwiZ2V0RGF0ZVRvU3RyaW5nIiwic3VibWl0QnRuIiwiZWxlbSIsIm1pbiIsIm1heCIsImVycm9yQmxvY2siLCJpc1ZhbGlkIiwidmFsaWRhdGUiLCJ2YWx1ZSIsImhpZGRlbiIsImRpc2FibGVkIiwic3VibWl0Rm9ybSIsInByZXZlbnREZWZhdWx0IiwiYWRkRGF0YSIsInJlc2V0Iiwia2V5Iiwic2lkZWJhciIsImxpbmsiLCJwYXJlbnROb2RlIiwidGFnTmFtZSIsImNvbnRlbnQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJhcHBlbmQiLCJzdGF0aWMiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJjb3JyZWN0RGF0ZSIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImN1cnJlbnREYXRlIiwib25lRGF5Iiwibm93Iiwic2hvd0RhdGEiLCJ2YWx1ZU9mIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsImRheSIsIm1vbnRoIiwieWVhciIsIm5hbWVWYWx1ZSIsInRleHRWYWx1ZSIsImRhdGVWYWx1ZSIsImRhdGEiLCJsZW5ndGgiLCJ0ZXh0IiwiaXNTaG93IiwiaW5uZXJUZXh0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIndpbmRvdyIsInJvb3RFbGVtZW50IiwiYm9keSIsImFwcCIsIm1haW5CbG9jayJdLCJzb3VyY2VSb290IjoiIn0=